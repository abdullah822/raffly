<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Raffly - Dashboard</title>

  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="css/simple-sidebar.css" rel="stylesheet">

  

</head>

<body>

  <div class="d-flex" id="wrapper">

    <!-- Page Content -->
<div id="page-content-wrapper" style="padding-top:50px;">

      <nav class="navbar navbar-expand-lg navbar-dark bg-dark text-white fixed-top border-bottom">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
            <li class="nav-item ">
              <a class="nav-link" href="#display-raffles">View Raffles <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#registeruser">Register User</a>
			</li>
            <li class="nav-item">
              <a class="nav-link" href="#createraffles">Create Raffle</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Options
              </a>
              <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="#">Main</a>
                <a class="dropdown-item" href="#createraffles">Raffles</a>
                <a class="dropdown-item" href="#registeruser">Users</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#">Admins</a>
              </div>
            </li>
          </ul>
        </div>
      </nav>

<div class="container-fluid" style="padding: 80px;"> 
      <!-- forms start here -->
 <div id="display-raffles" style="min-height:80vh;"> <br><br><br>
<h4>View Raffles</h4>
<div class="wrapper" id="fetch-wrapper">
    </div> 
    </div><br><hr>

<div id="registeruser"><br><br><br>
<form action="../middle/php/register.php" method="POST" class="mbr-form form-with-styler" id="registration" autocomplete="off">

                <h4 class="mbr-fonts-style display-5">Register a User</h4>

                <label>Name</label>
                <input type="hidden" name="ip" id="ip-formbuilder-s">
                <input type="text" name="fname" placeholder="First Name" data-form-field="fname"
                    class="form-control text-multiple" required="required" value="" id="fname-formbuilder-s">
                <input type="text" name="lname" placeholder="Last Name" data-form-field="lname"
                    class="form-control text-multiple" required="required" value="" id="lname-formbuilder-s">
                <br><label for="email-formbuilder-s">Email</label>
                <input type="email" name="email" placeholder="Email" data-form-field="email"
                    class="form-control display-7" required="required" value="" id="email-formbuilder-s">
                <label for="phone-formbuilder-s">Phone</label>
                <input type="tel" name="phone" placeholder="Phone" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}"
                    data-form-field="phone" class="form-control display-7" required="required" value=""
                    id="phone-formbuilder-s">
                <br><label for="date-formbuilder-s">Birth date</label>
                <input type="date" name="date" data-form-field="date" required="required" class="form-control display-7"
                    value="" id="date-formbuilder-s">
                <label for="uname-formbuilder-s">Username</label>
                <input type="text" name="uname" placeholder="Username" data-form-field="uname" required="required"
                    class="form-control display-7" value="" id="uname-formbuilder-s">
                <br><label for="psw-formbuilder-s">Password</label>
                <input type="password" name="psw" placeholder="Password" data-form-field="psw" required="required"
                    class="form-control display-7" value="" id="psw-formbuilder-s">
                <label for="psw2-formbuilder-s">Confirm Password</label>
                <input type="password" name="psw2" placeholder="Confirm Password" data-form-field="psw2"
                    required="required" class="form-control display-7" value="" id="psw2-formbuilder-s">
                <br><label for="address-formbuilder-s">Street Address</label>
                <input type="text" name="address" placeholder="123 Mockingbird Ln." data-form-field="address"
                    required="required" class="form-control display-7" value="" id="address-formbuilder-s">

                <label for="address2-formbuilder-s">APT/FL</label>
                <input type="text" name="address2" placeholder="Apt/Fl" data-form-field="address2"
                    class="form-control display-7" value="" id="address2-formbuilder-s">
                <br><label for="city-formbuilder-s">City/Town</label>
                <input type="text" name="city" placeholder="City/Town" data-form-field="city" required="required"
                    class="form-control display-7" value="" id="city-formbuilder-s">
                <label for="state-formbuilder-s">State/Province</label>
                <input type="text" name="state" placeholder="State" data-form-field="state" required="required"
                    class="form-control display-7" value="" id="state-formbuilder-s">
                <br><label for="zip-formbuilder-s">Zip
                    Code</label>
                <input type="text" name="zip" placeholder="Zip Code" data-form-field="zip" required="required"
                    class="form-control display-7" value="" id="zip-formbuilder-s">
                <label for="card-formbuilder-s">Last 4 of Credit Card</label>
                <input type="password" name="card" placeholder="card" data-form-field="card" required="required"
                    class="form-control display-7" value="" id="card-formbuilder-s">
                <input type="hidden" name="g-recaptcha-response" id="g-recaptcha-response-formbuilder-s">
                <br>
                <button type="submit" class="btn btn-primary display-7" style="margin: 0 auto;">Register</button>
            </form>
        </div>
        <br><hr><br>
        <!-- create raffle -->
        
<div id="createraffles"><br><br><br> </div>
<form action="../middle/php/createRaffle.php" method="POST" class="mbr-form form-with-styler" >
<input type="hidden" name="hun"  value="">
<div class="form-row">
<div hidden="hidden" data-form-alert="" class="alert alert-success col-12">Thanks for filling out the form!</div>
<div hidden="hidden" data-form-alert-danger="" class="alert alert-danger col-12">Oops...! some problem!</div>
</div>
<div class="dragArea form-row">
<div class="col-lg-12 col-md-12 col-sm-12">
<h4>Create Raffle</h4>
</div>
<div class="col-lg-12 col-md-12 col-sm-12">
<hr>
</div>
<div data-for="title" class="col-lg-12 col-md-12 col-sm-12 form-group">
<label for="title-formbuilder-1" class="form-control-label mbr-fonts-style display-7">Raffle Title</label>
<input type="text" name="title" placeholder="Title" data-form-field="title" class="form-control display-7" required="required" value="" id="title-formbuilder-1">
</div>
<div data-for="company" class="col-lg-12 col-md-12 col-sm-12 form-group">
<label for="company-formbuilder-1" class="form-control-label mbr-fonts-style display-7">Company</label>
<input type="text" name="company" placeholder="Company" data-form-field="company" class="form-control display-7" required="required" value="" id="company-formbuilder-1">
</div>
<div data-for="description" class="col-lg-12 col-md-12 col-sm-12 form-group">
<label for="description-formbuilder-1" class="form-control-label mbr-fonts-style display-7">Decription</label>
<textarea name="description" placeholder="Description" data-form-field="description" required="required" class="form-control display-7" id="description-formbuilder-1"></textarea>
</div>
<div data-for="quantity" class="col-lg-12 col-md-12 col-sm-12 form-group">
<label for="quantity-formbuilder-1" class="form-control-label mbr-fonts-style display-7">Quantity</label>
<input type="number" name="quantity" placeholder="Quantitiy" max="10000" min="0" step="1" data-form-field="quantity" required="required" class="form-control display-7" value="" id="quantity-formbuilder-1">
</div>
<div class="col-lg-12 col-md-12 col-sm-12 form-group" data-for="productTitle">
<label for="productTitle-formbuilder-1" class="form-control-label mbr-fonts-style display-7">Product Name</label>
<input type="text" name="productTitle" placeholder="Product Title" data-form-field="productTitle" required="required" class="form-control display-7" value="" id="productTitle-formbuilder-1">
</div>
<div data-for="productDescription" class="col-lg-12 col-md-12 col-sm-12 form-group">
<label for="productDescription-formbuilder-1" class="form-control-label mbr-fonts-style display-7">Product Description</label>
<textarea name="productDescription" placeholder="Product Description" data-form-field="productDescription" required="required" class="form-control display-7" id="productDescription-formbuilder-1"></textarea>
</div>
<div data-for="Image" class="col-lg-12 col-md-12 col-sm-12 form-group">
<label for="Image-formbuilder-1" class="form-control-label mbr-fonts-style display-7">Image File</label>
<input type="file" name="image" placeholder="Image file" data-form-field="Image" class="form-control display-7" value="" accept="image/png, image/jpeg" id="Image-formbuilder-1">
</div>
<div class="col-lg-12 col-md-12 col-sm-12 form-group" data-for="format">
<label for="format-formbuilder-1" class="form-control-label mbr-fonts-style display-7">Format (Optional)</label>
<input type="text" name="format" placeholder="Format" data-form-field="format" class="form-control display-7" value="" id="format-formbuilder-1">
</div>
<div class="col-lg-12 col-md-12 col-sm-12">
<h5 class="mbr-fonts-style display-5">Sizes (US) Select all that apply</h5>
</div>
<div class="col form-group">
<div class="form-control-label">
<label for="3XL-formbuilder-1" class="mbr-fonts-style display-7">Words</label>
</div>
<div data-for="Extra Small" class="form-check form-check-inline">
<input type="checkbox" value="Yes" name="Extra Small" data-form-field="Extra Small" class="form-check-input display-7" id="Extra Small-formbuilder-1">
<label for="Extra Small-formbuilder-1" class="form-check-label display-7">Extra Small</label>
</div>
<div data-for="Small " class="form-check form-check-inline">
<input type="checkbox" value="Yes" name="Small " data-form-field="Small " class="form-check-input display-7" id="Small -formbuilder-1">
<label for="Small -formbuilder-1" class="form-check-label display-7">Small </label>
</div>
<div data-for="Medium " class="form-check form-check-inline">
<input type="checkbox" value="Yes" name="Medium " data-form-field="Medium " class="form-check-input display-7" id="Medium -formbuilder-1">
<label for="Medium -formbuilder-1" class="form-check-label display-7">Medium </label>
</div>
<div data-for="Large" class="form-check form-check-inline">
<input type="checkbox" value="Yes" name="Large" data-form-field="Large" class="form-check-input display-7" id="Large-formbuilder-1">
<label for="Large-formbuilder-1" class="form-check-label display-7">Large</label>
</div>
<div data-for=" Extra-Large" class="form-check form-check-inline">
<input type="checkbox" value="Yes" name=" Extra-Large" data-form-field=" Extra-Large" class="form-check-input display-7" id=" Extra-Large-formbuilder-1">
<label for=" Extra-Large-formbuilder-1" class="form-check-label display-7"> Extra-Large</label>
</div>
<div data-for="2XL" class="form-check form-check-inline">
<input type="checkbox" value="Yes" name="2XL" data-form-field="2XL" class="form-check-input display-7" id="2XL-formbuilder-1">
<label for="2XL-formbuilder-1" class="form-check-label display-7">2XL</label>
</div>
<div data-for="3XL" class="form-check form-check-inline">
<input type="checkbox" value="Yes" name="3XL" data-form-field="3XL" class="form-check-input display-7" id="3XL-formbuilder-1">
<label for="3XL-formbuilder-1" class="form-check-label display-7">3XL</label>
</div>
</div>
<div class="col form-group">
<div class="form-control-label">
<label for="14-formbuilder-1" class="mbr-fonts-style display-7">Numbers</label>
</div>
<div data-for="1" class="form-check form-check-inline">
<input type="checkbox" value="Yes" name="1" data-form-field="1" class="form-check-input display-7" id="1-formbuilder-1">
<label for="1-formbuilder-1" class="form-check-label display-7">1</label>
</div>
<div data-for="2" class="form-check form-check-inline">
<input type="checkbox" value="Yes" name="2" data-form-field="2" class="form-check-input display-7" id="2-formbuilder-1">
<label for="2-formbuilder-1" class="form-check-label display-7">2</label>
</div>
<div data-for="3" class="form-check form-check-inline">
<input type="checkbox" value="Yes" name="3" data-form-field="3" class="form-check-input display-7" id="3-formbuilder-1">
<label for="3-formbuilder-1" class="form-check-label display-7">3</label>
</div>
<div data-for="4" class="form-check form-check-inline">
<input type="checkbox" value="Yes" name="4" data-form-field="4" class="form-check-input display-7" id="4-formbuilder-1">
<label for="4-formbuilder-1" class="form-check-label display-7">4</label>
</div>
<div data-for="5" class="form-check form-check-inline">
<input type="checkbox" value="Yes" name="5" data-form-field="5" class="form-check-input display-7" id="5-formbuilder-1">
<label for="5-formbuilder-1" class="form-check-label display-7">5</label>
</div>
<div data-for="6" class="form-check form-check-inline">
<input type="checkbox" value="Yes" name="6" data-form-field="6" class="form-check-input display-7" id="6-formbuilder-1">
<label for="6-formbuilder-1" class="form-check-label display-7">6</label>
</div>
<div data-for="7" class="form-check form-check-inline">
<input type="checkbox" value="Yes" name="7" data-form-field="7" class="form-check-input display-7" id="7-formbuilder-1">
<label for="7-formbuilder-1" class="form-check-label display-7">7</label>
</div>
<div data-for="8" class="form-check form-check-inline">
<input type="checkbox" value="Yes" name="8" data-form-field="8" class="form-check-input display-7" id="8-formbuilder-1">
<label for="8-formbuilder-1" class="form-check-label display-7">8</label>
</div>
<div data-for="9" class="form-check form-check-inline">
<input type="checkbox" value="Yes" name="9" data-form-field="9" class="form-check-input display-7" id="9-formbuilder-1">
<label for="9-formbuilder-1" class="form-check-label display-7">9</label>
</div>
<div data-for="10" class="form-check form-check-inline">
<input type="checkbox" value="Yes" name="10" data-form-field="10" class="form-check-input display-7" id="10-formbuilder-1">
<label for="10-formbuilder-1" class="form-check-label display-7">10</label>
</div>
<div data-for="11" class="form-check form-check-inline">
<input type="checkbox" value="Yes" name="11" data-form-field="11" class="form-check-input display-7" id="11-formbuilder-1">
<label for="11-formbuilder-1" class="form-check-label display-7">11</label>
</div>
<div data-for="12" class="form-check form-check-inline">
<input type="checkbox" value="Yes" name="12" data-form-field="12" class="form-check-input display-7" id="12-formbuilder-1">
<label for="12-formbuilder-1" class="form-check-label display-7">12</label>
</div>
<div data-for="13" class="form-check form-check-inline">
<input type="checkbox" value="Yes" name="13" data-form-field="13" class="form-check-input display-7" id="13-formbuilder-1">
<label for="13-formbuilder-1" class="form-check-label display-7">13</label>
</div>
<div data-for="14" class="form-check form-check-inline">
<input type="checkbox" value="Yes" name="14" data-form-field="14" class="form-check-input display-7" id="14-formbuilder-1">
<label for="14-formbuilder-1" class="form-check-label display-7">14</label>
</div>
</div>
<div data-for="startTime" class="col-lg-12 col-md-12 col-sm-12 form-group">
<label for="startTime-formbuilder-1" class="form-control-label mbr-fonts-style display-7">Begins</label>
<input type="date" name="startTime" data-form-field="startTime" required="required" class="form-control display-7" value="" id="startTime-formbuilder-1">
</div>
<div class="col-lg-12 col-md-12 col-sm-12 form-group" data-for="endTime" style="">
<label for="endTime-formbuilder-1" class="form-control-label mbr-fonts-style display-7">Ends</label>
<input type="date" name="endTime" data-form-field="endTime" required="required" class="form-control display-7" value="" id="endTime-formbuilder-1">
</div>
<div class="col-auto">
<button type="submit" class="btn btn-primary display-7">Create</button>
</div>
</div>
</form>
<br> <hr> <br><br><br><br>
</div>
      </div>
    </div>
    <!-- /#page-content-wrapper -->
  </div>
  <!-- /#wrapper -->

  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Menu Toggle Script -->
  <script>
    $("#menu-toggle").click(function(e) {
      e.preventDefault();
      $("#wrapper").toggleClass("toggled");
    });
  </script>
  
  <script>
        let url = '../middle/php/getRaffles.php';

        
            fetch(url, {
                method: "GET",
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                }
            })
                .then((res) => { return res.json() })
                .then((data) => {
                    let result = `<div id="db-list">`;
                    count = 0;
                    finish = [];
                    data.forEach((raffle) => {
                        const { id, title, description, startTime,
                            endTime, company, productImage, quantity,
                            size, format, unit_cost, productName } = raffle
                        start = new Date(startTime.$timestamp.t * 1000);
                        end = new Date(endTime.$timestamp.t * 1000);
                        expire = '';
                        count++;
                        result +=
                            `
                        <div class="card" style="display:block;">
                                <div class="card-wrapper">
                                    <details>
                                        <summary>${title}</summary>
                                    <ul style="text-align:left;">
                                        <li class="" name="countdown[]" id="${id.$oid}" >ID: ${id.$oid}</li>
                                        <li class="mbr-text mbr-fonts-style display-7">Desc: ${description}</li>
                                        <li class="mbr-text mbr-fonts-style display-7">Start: ${start}</li>
                                        <li class="mbr-text mbr-fonts-style display-7">End: ${end}</li>
                                        <li class="mbr-text mbr-fonts-style display-7">Company: ${company}</li>
                                        <li class="mbr-text mbr-fonts-style display-7">Product Name: ${productName}</li>
                                        <li class="mbr-text mbr-fonts-style display-7">Unit Cost: ${unit_cost}</li>
                                        <li class="mbr-text mbr-fonts-style display-7">Quantity: ${quantity}</li>
                                        <li class="mbr-text mbr-fonts-style display-7">Size: ${size}</li>
                                        <li class="mbr-text mbr-fonts-style display-7">Format: ${format}</li>
                                    </ul>
                                    </details>
                                </div>
                                </div>
                            </div>
                    </div>`;

                        document.getElementById('fetch-wrapper').innerHTML = result;
                    });
                })
                .catch(err => console.log('Request Failed', err)); // Catch errors
    </script>


</body>

</html>
